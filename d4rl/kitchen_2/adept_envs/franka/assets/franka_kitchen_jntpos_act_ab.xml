<!--Copyright 2020 Google LLC-->

<!--Licensed under the Apache License, Version 2.0 (the "License");-->
<!--you may not use this file except in compliance with the License.-->
<!--You may obtain a copy of the License at-->

    <!--https://www.apache.org/licenses/LICENSE-2.0-->

<!--Unless required by applicable law or agreed to in writing, software-->
<!--distributed under the License is distributed on an "AS IS" BASIS,-->
<!--WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.-->
<!--See the License for the specific language governing permissions and-->
<!--limitations under the License.-->

<mujoco model="franka_mocap_studyTable_buttons">

    <size njmax='1000' nconmax='1000'/>

    <include file="../../../adept_models/scenes/basic_scene.xml"/>
    <include file="../../../third_party/franka/assets/assets.xml"/>
    <include file="../../../third_party/franka/assets/actuator0.xml"/>
    <include file="../../../adept_models/kitchen/assets/oven_asset.xml"/>
    <include file="../../../adept_models/kitchen/assets/counters_asset.xml"/>
    <include file="../../../adept_models/kitchen/assets/backwall_asset.xml"/>
    <include file="../../../adept_models/kitchen/assets/slidecabinet_asset.xml"/>
    <include file="../../../adept_models/kitchen/assets/hingecabinet_asset.xml"/>
    <include file="../../../adept_models/kitchen/assets/microwave_asset.xml"/>
    <include file="../../../adept_models/kitchen/assets/kettle_asset.xml"/>

    <visual>
    <global offwidth="2560" offheight="1920" />
    <quality shadowsize="4096" offsamples="8" />
    <map force="0.1" fogend="5" />
    </visual>

    <compiler inertiafromgeom='auto' inertiagrouprange='3 5' angle="radian"
              meshdir="../../../adept_models/kitchen"
              texturedir="../../../adept_models/kitchen"/>

    <equality>
        <weld body1="vive_controller" body2="world" solref="0.02 1" solimp=".7 .95 0.050"/>
    </equality>


<!--    <actuator>-->
<!--        &lt;!&ndash; Physical limits of the actuator. &ndash;&gt;-->
<!--        <motor ctrllimited="true" ctrlrange="-80.0 80.0" joint="joint1" name="torq_j1"/>-->
<!--        <motor ctrllimited="true" ctrlrange="-80.0 80.0" joint="joint2" name="torq_j2"/>-->
<!--        <motor ctrllimited="true" ctrlrange="-80.0 80.0" joint="joint3" name="torq_j3"/>-->
<!--        <motor ctrllimited="true" ctrlrange="-80.0 80.0" joint="joint4" name="torq_j4"/>-->
<!--        <motor ctrllimited="true" ctrlrange="-80.0 80.0" joint="joint5" name="torq_j5"/>-->
<!--        <motor ctrllimited="true" ctrlrange="-12.0 12.0" joint="joint6" name="torq_j6"/>-->
<!--        <motor ctrllimited="true" ctrlrange="-12.0 12.0" joint="joint7" name="torq_j7"/>-->
<!--        <position ctrllimited="true" ctrlrange="0.0 0.04" joint="finger_joint1" kp="1000" name="gripper_finger_joint1" forcelimited="true" forcerange="-20 20"/>-->
<!--        <position ctrllimited="true" ctrlrange="-0.04 0.0" joint="finger_joint2" kp="1000" name="gripper_finger_joint2" forcelimited="true" forcerange="-20 20"/>-->
<!--    </actuator>-->
<!--    <asset>-->
<!--        <mesh name="link0" file="../../third_party/panda/meshes/link0.stl" />-->
<!--        <mesh name="link1" file="../../third_party/panda/meshes/link1.stl" />-->
<!--        <mesh name="link2" file="../../third_party/panda/meshes/link2.stl" />-->
<!--        <mesh name="link3" file="../../third_party/panda/meshes/link3.stl" />-->
<!--        <mesh name="link4" file="../../third_party/panda/meshes/link4.stl" />-->
<!--        <mesh name="link5" file="../../third_party/panda/meshes/link5.stl" />-->
<!--        <mesh name="link6" file="../../third_party/panda/meshes/link6.stl" />-->
<!--        <mesh name="link7" file="../../third_party/panda/meshes/link7.stl" />-->
<!--        <mesh name="link0_vis" file="../../third_party/panda/meshes/link0_vis.stl" />-->
<!--        <mesh name="link1_vis" file="../../third_party/panda/meshes/link1_vis.stl" />-->
<!--        <mesh name="link2_vis" file="../../third_party/panda/meshes/link2_vis.stl" />-->
<!--        <mesh name="link3_vis" file="../../third_party/panda/meshes/link3_vis.stl" />-->
<!--        <mesh name="link4_vis" file="../../third_party/panda/meshes/link4_vis.stl" />-->
<!--        <mesh name="link5_vis" file="../../third_party/panda/meshes/link5_vis.stl" />-->
<!--        <mesh name="link6_vis" file="../../third_party/panda/meshes/link6_vis.stl" />-->
<!--        <mesh name="link7_vis" file="../../third_party/panda/meshes/link7_vis.stl" />-->
<!--        <mesh name="hand" file="../../third_party/panda/meshes/panda_gripper/hand.stl" />-->
<!--        <mesh name="hand_vis" file="../../third_party/panda/meshes/panda_gripper/hand_vis.stl" />-->
<!--        <mesh name="finger" file="../../third_party/panda/meshes/panda_gripper/finger.stl" />-->
<!--        <mesh name="finger_vis" file="../../third_party/panda/meshes/panda_gripper/finger_vis.stl" />-->
<!--        <mesh name="finger_vis2" file="../../third_party/panda/meshes/panda_gripper/finger_longer.stl" />-->
<!--    </asset>-->


    <worldbody>

        <!-- Mocap -->
        <body name="vive_controller" mocap="true" pos="-0.440 -0.092 2.026" euler="-1.57 0 -.785">
            <geom type="box" group="2" pos='0 0 .142' size="0.02 0.10 0.03" contype="0" conaffinity="0" rgba=".9 .7 .95 0" euler="0 0 -.785"/>
        </body>

        <site name='target' pos='0 0 0' size='0.1' rgba='0 2 0 .2'/>
        <camera name='left_cap' pos='-1.2 -0.5 1.8' quat='0.78 0.49 -0.22 -0.32' />
        <camera name='right_cap' pos='1.2 -0.5 1.8' quat='0.76 0.5 0.21 0.35'/>

        <!-- Robot -->
        <body pos='0.55 0 1.8' euler='0 0 0'> -->
            <geom type='cylinder' size='.120 .90' pos='-.04 0 -0.90' class='panda_viz'/>
            <include file="../../../third_party/franka/assets/chain0.xml"/>
<!--            <include file="../../../third_party/panda/robot.xml"/>-->
        </body>

        <body name='desk' pos='-0.1 0.75 0'>

            <body name="counters1" pos="0 0 0" >
                <include file="../../../adept_models/kitchen/assets/counters_chain.xml"/>
            </body>
            <body name="counters2" pos="2.52 0 0" >
                <include file="../../../adept_models/kitchen/assets/counters2_chain.xml"/>
            </body>
            <body name="oven" pos="0.6 0 0" >    <!-- 0.7 0 0-->
                <include file="../../../adept_models/kitchen/assets/oven_chain.xml"/>
            </body>
            <body name="backwall" pos="0 0 0" >
                <include file="../../../adept_models/kitchen/assets/backwall_chain.xml"/>
            </body>
<!--            <body name="slidecabinet" pos="0.40 0.3 2.6" euler="0 3.14 0">-->
            <body name="slidecabinet" pos="0.20 0.3 2.45" euler="0 3.14 0">
                <include file="../../../adept_models/kitchen/assets/slidecabinet_chain.xml"/>
            </body>
<!--            <body name="hingecabinet" pos="1.304 0.28 2.6" >-->
            <body name="hingecabinet" pos="1.104 0.28 2.45" >
                <include file="../../../adept_models/kitchen/assets/hingecabinet_chain.xml"/>
            </body>
            <body name="microwave" pos="1.6 -.25 1.98" euler="0 0 -.3">
                <include file="../../../adept_models/kitchen/assets/microwave_chain.xml"/>
            </body>
        </body>
        <body name="kettle" pos="-0.3 0.35 1.626">
            <freejoint/>
            <include file="../../../adept_models/kitchen/assets/kettle_chain.xml"/>
        </body>

    </worldbody>


    <keyframe>
        <key qpos='0.16 -1.76 1.84 -2.51 0.36 0.79 1.55 0.00 0.0 1.25561e-05 1.57437e-07 1.25561e-05 1.57437e-07 1.25561e-05 1.57437e-07 1.25561e-05 1.57437e-07 8.24417e-05 9.48283e-05 0 0 0 0 -0.269 0.35 1.61523 1 1.34939e-19 -3.51612e-05 -7.50168e-19'/>
    </keyframe>

</mujoco>
